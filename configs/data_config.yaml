# ============================================================
# Configuration des datasets — Depth Anything V2 PFE
# ============================================================
# Ref: Phase 2 de la roadmap + Appendice A du papier

# --- Données synthétiques (entraînement Teacher) ---
synthetic:
  hypersim:
    root: "datasets/synthetic/hypersim"
    description: "Images indoor synthétiques (Apple)"
    url: "https://github.com/apple/ml-hypersim"
    max_samples: 50000           # vs 595k dans le papier original
    format:
      images: "images/*.png"
      depth: "depth/*.npy"
    notes: "Échantillonnage stratifié pour diversité de scènes"

  virtual_kitti:
    root: "datasets/synthetic/vkitti2"
    description: "Images outdoor/driving synthétiques"
    url: "https://europe.naverlabs.com/research/computer-vision/proxy-virtual-worlds-vkitti-2/"
    max_samples: 20000
    format:
      images: "images/*.png"
      depth: "depth/*.png"        # 16-bit PNG

# --- Données réelles non étiquetées (pseudo-labels → Student) ---
real_unlabeled:
  sa1b:
    root: "datasets/real_unlabeled/sa1b"
    description: "Subset de Segment Anything 1B (Meta)"
    url: "https://ai.meta.com/datasets/segment-anything/"
    target_samples:
      phase1: 50000               # Proto rapide
      phase2: 200000              # Si Phase 1 OK
      phase3: 500000              # Si temps disponible
    min_resolution: 512           # Filtrer images < 512px
    format:
      images: "images/*.jpg"

# --- Benchmarks d'évaluation ---
benchmarks:
  nyu_depth_v2:
    root: "datasets/benchmarks/nyu_depth_v2"
    description: "NYU-Depth V2 test set (indoor)"
    n_test_images: 654
    min_depth: 0.001              # mètres
    max_depth: 10.0               # mètres
    eigen_crop: [45, 471, 41, 601]  # (top, bottom, left, right)
    format:
      images: "images/*.png"
      depth: "depth/*.npy"

  kitti:
    root: "datasets/benchmarks/kitti"
    description: "KITTI Eigen split test set (outdoor/driving)"
    n_test_images: 697
    min_depth: 0.001
    max_depth: 80.0
    format:
      images: "images/*.png"
      depth: "depth/*.png"

# --- Preprocessing ---
preprocessing:
  image_size: 518                 # Resize (doit être multiple de 14 pour ViT)
  crop_size: 480                  # Random crop pendant l'entraînement
  normalize:
    mean: [0.485, 0.456, 0.406]   # ImageNet
    std: [0.229, 0.224, 0.225]

# --- Dataloader ---
dataloader:
  num_workers: 8
  prefetch_factor: 2
  pin_memory: true
  target_speed: 500               # images/sec (benchmark vitesse)

# --- Splits ---
splits:
  val_ratio: 0.1                  # 10% pour validation
  seed: 42                        # Reproductibilité
